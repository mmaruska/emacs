** Define a Debian-specific Emacs flavor.
   Provided by: Rob Browning <rlb@defaultvalue.org>

--- emacs-snapshot-20070902.orig/lisp/startup.el
+++ emacs-snapshot-20070902/lisp/startup.el
@@ -308,6 +308,10 @@
 
 (defvar normal-top-level-add-subdirs-inode-list nil)
 
+(defconst debian-emacs-flavor 'emacs-snapshot
+  "A symbol representing the particular debian flavor of emacs running.
+Something like 'emacs20, 'xemacs20, etc.")
+
 (defvar no-blinking-cursor nil)
 
 (defvar default-frame-background-mode)
@@ -848,9 +852,18 @@
     ;; Run the site-start library if it exists.  The point of this file is
     ;; that it is run before .emacs.  There is no point in doing this after
     ;; .emacs; that is useless.
-    (if site-run-file
-	(load site-run-file t t))
+    ;; (if site-run-file
+    ;; (load site-run-file t t))
 
+    ;; Debian version of site-start.
+    (if site-run-file
+       (progn
+          ;; Load all the debian package snippets.
+          ;; It's in here because we want -q to kill it too.
+          (if (load "debian-startup" t t nil)
+              (debian-startup debian-emacs-flavor))
+          ;; Now the normal site file...
+          (load site-run-file t t nil)))
     ;; Sites should not disable this.  Only individuals should disable
     ;; the startup message.
     (setq inhibit-startup-message nil)
